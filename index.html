<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>VI Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}

:root{
--bg:#f5f5f7;
--text:#1d1d1f;
--card:#fff;
--accent:#0071e3;
--muted:#6e6e73;
}

body.dark{
--bg:#0f0f12;
--text:#f5f5f7;
--card:#1c1c1e;
--muted:#a1a1a6;
}

body{
background:var(--bg);
color:var(--text);
transition:.3s;
}

/* HEADER */
header{
background:#111;
color:#fff;
padding:16px 24px;
display:flex;
justify-content:space-between;
align-items:center;
}

.controls{display:flex;gap:16px;align-items:center}

.toggle{
cursor:pointer;
font-size:14px;
opacity:.8;
}

.cart-btn{cursor:pointer;position:relative}
.cart-count{
position:absolute;
top:-6px;
right:-10px;
background:var(--accent);
color:#fff;
font-size:12px;
padding:2px 6px;
border-radius:12px;
}

/* PRODUCTS */
.section{max-width:1200px;margin:auto;padding:70px 20px}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:36px}

.product{
background:var(--card);
border-radius:32px;
padding:32px;
box-shadow:0 12px 30px rgba(0,0,0,.06);
display:flex;
flex-direction:column;
text-align:center;
transition:.5s cubic-bezier(.4,0,.2,1);
transform-style:preserve-3d;
}

.product:hover{
transform:translateY(-10px) rotateX(4deg) rotateY(-4deg);
box-shadow:0 30px 80px rgba(0,0,0,.18);
}

.product img{
width:180px;
height:180px;
object-fit:contain;
margin:0 auto 20px;
transition:.4s cubic-bezier(.4,0,.2,1);
}

.product:hover img{
transform:translateZ(20px) scale(1.06);
}

.product p{font-size:14px;color:var(--muted);margin:12px 0}
.product span{font-weight:600;margin-bottom:18px}

.product button{
margin-top:auto;
background:var(--accent);
color:#fff;
border:none;
border-radius:22px;
padding:14px;
cursor:pointer;
transition:.25s;
}

.product button:hover{transform:translateY(-2px)}
.product button:active{transform:scale(.96)}

/* OVERLAY + BLUR */
.overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,.35);
backdrop-filter:blur(8px);
opacity:0;
pointer-events:none;
transition:.3s;
z-index:1000;
}

.overlay.show{
opacity:1;
pointer-events:all;
}

/* MODALS */
.modal{
position:fixed;
top:50%;left:50%;
transform:translate(-50%,-50%) scale(.95);
width:100%;
max-width:420px;
background:var(--card);
border-radius:28px;
padding:28px;
box-shadow:0 30px 80px rgba(0,0,0,.25);
opacity:0;
pointer-events:none;
transition:.3s;
z-index:1001;
}

.modal.open{
opacity:1;
pointer-events:all;
transform:translate(-50%,-50%) scale(1);
}

.cart-item{
display:flex;
justify-content:space-between;
align-items:center;
font-size:14px;
margin-bottom:10px;
gap:10px;
}

.qty{
display:flex;
gap:6px;
align-items:center;
}

.qty button{
width:24px;height:24px;
border:none;border-radius:50%;
background:#e5e5ea;
cursor:pointer;
}

.cart-total{font-weight:600;margin:16px 0}

input{
width:100%;
padding:12px;
margin-bottom:10px;
border-radius:14px;
border:1px solid #d2d2d7;
background:var(--card);
color:var(--text);
}

button.checkout{
width:100%;
padding:14px;
background:var(--accent);
color:#fff;
border:none;
border-radius:18px;
cursor:pointer;
}

.notice{
background:#ffecec;
color:#b00020;
padding:10px;
border-radius:14px;
font-size:13px;
margin-bottom:12px;
display:none;
}
</style>
</head>

<body>

<header>
<div class="logo">VI Store</div>
<div class="controls">
<div class="toggle" onclick="toggleTheme()">üåó</div>
<div class="cart-btn" onclick="openCart()">üõí
<div class="cart-count" id="cartCount">0</div>
</div>
</div>
</header>

<section class="section">
<div class="products">

<div class="product">
<img src="iphone.jpg">
<h3>iPhone 15 Pro</h3>
<p>–¢–∏—Ç–∞–Ω–æ–≤—ã–π –∫–æ—Ä–ø—É—Å. A17 Pro</p>
<span>129 990 ‚ÇΩ</span>
<button onclick="addToCart('iPhone 15 Pro',129990)">–ö—É–ø–∏—Ç—å</button>
</div>

<div class="product">
<img src="macbook.jpg">
<h3>MacBook Air M2</h3>
<p>–õ—ë–≥–∫–∏–π. –ú–æ—â–Ω—ã–π.</p>
<span>149 990 ‚ÇΩ</span>
<button onclick="addToCart('MacBook Air M2',149990)">–ö—É–ø–∏—Ç—å</button>
</div>

<div class="product">
<img src="watch.png">
<h3>Apple Watch Ultra</h3>
<p>–î–ª—è –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π</p>
<span>99 990 ‚ÇΩ</span>
<button onclick="addToCart('Apple Watch Ultra',99990)">–ö—É–ø–∏—Ç—å</button>
</div>

</div>
</section>

<div class="overlay" id="overlay" onclick="closeAll()"></div>

<div class="modal" id="cart">
<h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
<div class="notice" id="notice"></div>
<div id="cartItems"></div>
<div class="cart-total" id="cartTotal"></div>
<input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
<input id="address" placeholder="–ê–¥—Ä–µ—Å">
<input id="email" placeholder="Email">
<button class="checkout" onclick="openCheckout()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
</div>

<div class="modal" id="checkout">
<h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h2>
<div id="checkoutSummary"></div>
<div class="cart-total" id="checkoutTotal"></div>
<button class="checkout" onclick="confirmOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
if(localStorage.getItem('theme')==='dark')document.body.classList.add('dark');

function save(){localStorage.setItem('cart',JSON.stringify(cart))}
function toggleTheme(){
document.body.classList.toggle('dark');
localStorage.setItem('theme',document.body.classList.contains('dark')?'dark':'light');
}

function openCart(){show('cart')}
function closeAll(){hide('cart');hide('checkout')}

function show(id){
document.getElementById(id).classList.add('open');
document.getElementById('overlay').classList.add('show');
render();
}
function hide(id){
document.getElementById(id).classList.remove('open');
document.getElementById('overlay').classList.remove('show');
}

function addToCart(name,price){
const item=cart.find(i=>i.name===name);
item?item.qty++:cart.push({name,price,qty:1});
save();openCart();
}

function render(){
const items=document.getElementById('cartItems');
const total=document.getElementById('cartTotal');
items.innerHTML='';
let sum=0,count=0;
cart.forEach((i,idx)=>{
sum+=i.price*i.qty;
count+=i.qty;
items.innerHTML+=`
<div class="cart-item">
${i.name}
<div class="qty">
<button onclick="changeQty(${idx},-1)">‚àí</button>
${i.qty}
<button onclick="changeQty(${idx},1)">+</button>
</div>
<strong>${(i.price*i.qty).toLocaleString()} ‚ÇΩ</strong>
</div>`;
});
total.innerText=`–ò—Ç–æ–≥–æ: ${sum.toLocaleString()} ‚ÇΩ`;
cartCount.innerText=count;
}

function changeQty(i,d){
cart[i].qty+=d;
if(cart[i].qty<=0)cart.splice(i,1);
save();render();
}

function openCheckout(){
if(!cart.length)return error('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
if(!phone.value||!address.value||!email.value)return error('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
hide('cart');show('checkout');
let sum=0,html='';
cart.forEach(i=>{
sum+=i.price*i.qty;
html+=`<div class="cart-item">${i.name} √ó${i.qty}<strong>${(i.price*i.qty).toLocaleString()} ‚ÇΩ</strong></div>`;
});
checkoutSummary.innerHTML=html;
checkoutTotal.innerText=`–ò—Ç–æ–≥–æ: ${sum.toLocaleString()} ‚ÇΩ`;
}

function confirmOrder(){
cart=[];save();
window.location.reload();
}

function error(t){
notice.innerText=t;
notice.style.display='block';
}
render();
</script>

</body>
</html>
