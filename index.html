<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>VI Store</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}
:root{--bg:#f5f5f7;--text:#1d1d1f;--card:#fff;--accent:#0071e3;--muted:#6e6e73}
body.dark{--bg:#0f0f10;--text:#f5f5f7;--card:#1c1c1e;--muted:#9a9a9e}
body{background:var(--bg);color:var(--text);transition:.3s}

/* HEADER */
header{background:#111;color:#fff;padding:16px 24px;display:flex;justify-content:space-between;align-items:center}
.logo{font-weight:600}
.header-actions{display:flex;gap:16px;align-items:center}
.cart-btn{cursor:pointer;position:relative;transition:.2s}
.cart-btn.bump{transform:scale(1.15)}
.cart-count{position:absolute;top:-6px;right:-10px;background:var(--accent);color:#fff;font-size:12px;padding:2px 6px;border-radius:12px}
.theme-toggle{cursor:pointer}

/* PRODUCTS */
.section{max-width:1200px;margin:auto;padding:70px 20px}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:36px}
.product{background:var(--card);border-radius:32px;padding:32px 28px 28px;box-shadow:0 12px 30px rgba(0,0,0,.06);display:flex;flex-direction:column}
.product-image{height:200px;display:flex;align-items:center;justify-content:center;margin-bottom:24px}
.product img{max-width:180px;max-height:180px}
.product h3{margin-bottom:8px}
.product p{font-size:14px;color:var(--muted);margin-bottom:18px}
.product span{font-size:18px;font-weight:600;margin-bottom:22px}
.product button{
margin-top:auto;
background:var(--accent);
color:#fff;
border:none;
border-radius:22px;
padding:14px;
cursor:pointer;
transition:.2s;
}
.product button:active{transform:scale(.95)}

/* OVERLAY */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);opacity:0;pointer-events:none;transition:.3s;z-index:1000}
.overlay.show{opacity:1;pointer-events:all}

/* CART */
.cart{
position:fixed;
top:50%;left:50%;
transform:translate(-50%,-50%) scale(.95);
width:100%;
max-width:420px;
background:var(--card);
border-radius:28px;
padding:28px;
box-shadow:0 30px 80px rgba(0,0,0,.25);
opacity:0;
pointer-events:none;
transition:.3s;
z-index:1001
}
.cart.open{opacity:1;pointer-events:all;transform:translate(-50%,-50%) scale(1)}
.cart.shake{animation:shake .4s}
@keyframes shake{
0%,100%{transform:translate(-50%,-50%)}
25%{transform:translate(-48%,-50%)}
75%{transform:translate(-52%,-50%)}
}

.cart h2{margin-bottom:16px}
.cart-item{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;font-size:14px}
.qty{display:flex;align-items:center;gap:6px}
.qty button{width:24px;height:24px;border-radius:50%;border:1px solid #ccc;background:none;cursor:pointer}
.remove{cursor:pointer;color:#b00020;font-size:12px}
.cart-total{font-weight:600;margin:16px 0}
.cart input{width:100%;padding:12px;margin-bottom:10px;border-radius:14px;border:1px solid #d2d2d7}
.cart button.checkout{width:100%;padding:14px;background:var(--accent);color:#fff;border:none;border-radius:18px;cursor:pointer}
.notice{background:#ffecec;color:#b00020;padding:10px 14px;border-radius:14px;font-size:13px;margin-bottom:12px;display:none}
</style>
</head>

<body>

<header>
<div class="logo">VI Store</div>
<div class="header-actions">
<div class="theme-toggle" onclick="toggleTheme()">üåó</div>
<div class="cart-btn" id="cartBtn" onclick="openCart()">üõí
<div class="cart-count" id="cartCount">0</div>
</div>
</div>
</header>

<section class="section">
<div class="products">

<div class="product">
<div class="product-image"><img src="iphone.jpg"></div>
<h3>iPhone 15 Pro</h3>
<p>–¢–∏—Ç–∞–Ω–æ–≤—ã–π –∫–æ—Ä–ø—É—Å. A17 Pro.</p>
<span>129 990 ‚ÇΩ</span>
<button onclick="addToCart('iPhone 15 Pro',129990,this)">–ö—É–ø–∏—Ç—å</button>
</div>

<div class="product">
<div class="product-image"><img src="macbook.jpg"></div>
<h3>MacBook Air M2</h3>
<p>–õ—ë–≥–∫–∏–π. –ú–æ—â–Ω—ã–π.</p>
<span>149 990 ‚ÇΩ</span>
<button onclick="addToCart('MacBook Air M2',149990,this)">–ö—É–ø–∏—Ç—å</button>
</div>

<div class="product">
<div class="product-image"><img src="watch.png"></div>
<h3>Apple Watch Ultra</h3>
<p>–î–ª—è –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π.</p>
<span>99 990 ‚ÇΩ</span>
<button onclick="addToCart('Apple Watch Ultra',99990,this)">–ö—É–ø–∏—Ç—å</button>
</div>

</div>
</section>

<div class="overlay" id="overlay" onclick="closeCart()"></div>

<div class="cart" id="cart">
<h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
<div class="notice" id="notice"></div>
<div id="cartItems"></div>
<div class="cart-total" id="cartTotal"></div>
<input id="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
<input id="address" placeholder="–ê–¥—Ä–µ—Å">
<input id="email" placeholder="Email">
<button class="checkout" onclick="checkout()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
</div>

<script>
const cartEl=document.getElementById('cart');
const overlay=document.getElementById('overlay');
const cartItems=document.getElementById('cartItems');
const cartTotal=document.getElementById('cartTotal');
const cartCount=document.getElementById('cartCount');
const cartBtn=document.getElementById('cartBtn');
const notice=document.getElementById('notice');
const phone=document.getElementById('phone');
const address=document.getElementById('address');
const email=document.getElementById('email');

let cart=JSON.parse(localStorage.getItem('cart'))||{};

updateCount();

function saveCart(){localStorage.setItem('cart',JSON.stringify(cart));}

function toggleTheme(){
document.body.classList.toggle('dark');
localStorage.setItem('theme',document.body.classList.contains('dark'));
}
if(localStorage.getItem('theme')==='true')document.body.classList.add('dark');

function openCart(){cartEl.classList.add('open');overlay.classList.add('show');renderCart();}
function closeCart(){cartEl.classList.remove('open');overlay.classList.remove('show');}

function addToCart(name,price,btn){
cart[name]?cart[name].qty++:(cart[name]={price,qty:1});
saveCart();updateCount();renderCart();
btn.style.transform='scale(.92)';
setTimeout(()=>btn.style.transform='',150);
cartBtn.classList.add('bump');
setTimeout(()=>cartBtn.classList.remove('bump'),200);
}

function updateCount(){
cartCount.innerText=Object.values(cart).reduce((a,i)=>a+i.qty,0);
}

function renderCart(){
cartItems.innerHTML='';
let sum=0;
for(let n in cart){
let i=cart[n];sum+=i.price*i.qty;
cartItems.innerHTML+=`
<div class="cart-item">
${n}
<div class="qty">
<button onclick="changeQty('${n}',-1)">‚àí</button>${i.qty}
<button onclick="changeQty('${n}',1)">+</button>
</div>
<strong>${(i.price*i.qty).toLocaleString()} ‚ÇΩ</strong>
<span class="remove" onclick="removeItem('${n}')">‚úï</span>
</div>`;
}
cartTotal.innerText=`–ò—Ç–æ–≥–æ: ${sum.toLocaleString()} ‚ÇΩ`;
}

function changeQty(n,d){
cart[n].qty+=d;
if(cart[n].qty<=0)delete cart[n];
saveCart();updateCount();renderCart();
}

function removeItem(n){delete cart[n];saveCart();updateCount();renderCart();}

function checkout(){
notice.style.display='none';
if(!Object.keys(cart).length)return error('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞');
if(!phone.value||!address.value||!email.value)return error('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
let text='–ù–æ–≤—ã–π –∑–∞–∫–∞–∑:%0A',sum=0;
for(let n in cart){let i=cart[n];sum+=i.price*i.qty;text+=`- ${n} x${i.qty}: ${(i.price*i.qty).toLocaleString()} ‚ÇΩ%0A`;}
text+=`%0A–ò—Ç–æ–≥–æ: ${sum.toLocaleString()} ‚ÇΩ`;
window.location.href=`https://t.me/shinoalog?text=${text}`;
}

function error(t){
notice.innerText=t;
notice.style.display='block';
cartEl.classList.add('shake');
setTimeout(()=>cartEl.classList.remove('shake'),400);
}
</script>

</body>
</html>
